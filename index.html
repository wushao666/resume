<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>王小明 - 个人简历</title>
  <!-- 新增打印样式表 -->
  <link rel="stylesheet" href="./style/print.css" media="print">
  <style>
    /* 确保导出时进度条颜色正确 */
    @media print,
    screen {
      .progress-bar {
        position: relative;
        overflow: hidden;
      }

      .progress {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background-color: #007BFF !important;
      }
    }

    :root {
      --bg-color: #f4f4f4;
      --card-bg-color: #ffffff;
      --text-color: #333333;
      --link-color: #007BFF;
      --link-hover-color: #0056b3;
      --divider-color: #e8e8e8;
      --progress-bg-color: #e9ecef;
      --progress-bar-color: #007BFF;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      scroll-behavior: smooth;
    }

    .card {
      background-color: var(--card-bg-color);
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin: 40px auto;
      max-width: 85%;
      padding: 30px;
      transition: box-shadow 0.3s ease;
    }

    .card:hover {
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
    }

    .avatar {
      border-radius: 50%;
      width: 120px;
      height: 120px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .avatar:hover {
      transform: scale(1.1);
    }

    .name-contact {
      flex-grow: 1;
      margin-left: 20px;
    }

    .name {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .position {
      font-size: 18px;
      color: #666;
      margin-bottom: 10px;
    }

    .contact {
      font-size: 16px;
      line-height: 1.6;
    }

    .contact a {
      color: var(--link-color);
      text-decoration: none;
      margin-right: 15px;
      transition: color 0.3s ease;
    }

    .contact a:hover {
      color: var(--link-hover-color);
    }

    .intro {
      font-family: 'Dancing Script', cursive;
      position: relative;
      padding-left: 20px;
      margin-bottom: 30px;
    }

    .intro::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background-color: var(--link-color);
    }

    .section {
      margin-bottom: 30px;
      position: relative;
    }

    .section:not(:last-child)::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 0;
      right: 0;
      height: 1px;
      background-color: var(--divider-color);
    }

    .section h2 {
      font-size: 24px;
      margin-bottom: 15px;
      padding-bottom: 10px;
    }

    .timeline-item {
      margin-bottom: 20px;
    }

    .timeline-item h3 {
      font-size: 20px;
      margin-bottom: 5px;
    }

    .timeline-item p {
      margin: 0;
      line-height: 1.6;
    }

    .progress-bar {
      background-color: var(--progress-bg-color);
      border-radius: 5px;
      height: 20px;
      margin-bottom: 15px;
      position: relative;
    }

    .progress {
      background-color: var(--progress-bar-color);
      border-radius: 5px;
      height: 100%;
      text-align: left;
      padding-left: 10px;
      color: white;
      font-size: 14px;
    }

    .radar-chart {
      width: 100%;
      height: 230px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 1s ease-out;
    }

    .skills-container {
      display: flex;
      gap: 20px;
    }

    .progress-container {
      flex: 1;
    }

    .radar-container {
      flex: 1;
    }

    .footer-contact {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .footer-contact a {
      color: var(--link-color);
      font-size: 24px;
      transition: color 0.3s ease;
    }

    .footer-contact a:hover {
      color: var(--link-hover-color);
    }

    .button-container {
      text-align: center;
      margin-top: 40px;
    }

    button {
      background-color: var(--link-color);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--link-hover-color);
    }

    /* 强制背景色声明 */
    .card {
      background: white !important;
      position: relative;
    }

    /* 确保进度条背景可见 */
    .progress-bar {
      background-color: #e9ecef !important;
      position: relative;
    }

    /* 在style标签中更新预览容器样式 */
    .preview-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 999;
    }

    .editor-panel {
      width: 90%;
      height: 90vh;
      margin: 5vh auto;
      background: white;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
    }

    .editor-content {
      display: flex;
      flex: 1;
      padding: 20px;
    }

    .button-row {
      padding: 20px;
      display: flex;
      justify-content: center;
      /* border-top: 1px solid #eee; */
      box-sizing: border-box;
      padding-top: 10px;
    }

    /* 新增预览布局样式 */
    .preview-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      /* 修正1: rgba格式错误 */
      z-index: 999;
      display: flex;
      /* 修正2: 单独声明flex布局 */
      flex-direction: column;
      /* 垂直排列 */
      align-items: center;
      /* 水平居中 */
    }

    .editor-panel {
      display: flex;
      height: calc(100vh - 120px);
      /* 留出底部空间 */
      width: 90%;
      margin: 20px auto;
      gap: 2%;
      position: relative;
    }

    #markdown-input {
      width: 49%;
      height: 100%;
      padding: 15px;
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      font-size: 14px;
      resize: none;
    }

    #markdown-preview {
      width: 49%;
      height: 100%;
      background: white;
      padding: 25px;
      border-radius: 8px;
      overflow-y: auto;
    }

    .preview-controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- 新增Markdown编辑器库 -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
  <div class="button-container">
    <button id="download-pdf">下载简历PDF</button>
    <button id="preview-pdf">预览简历PDF</button>
    <button id="preview-md">从 Markdown 预览</button>
    <button id="export-pdf">导出为 PDF</button>
    <button id="export-image">导出为图片</button>
  </div>
  <div class="card" id="resume-card">
    <div class="header">
      <img class="avatar"
        src="https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/image_generation/459c82913030032351c934812b7ddd09_1741676356514132792.png~tplv-a9rns2rl98-image.png?rk3s=25bff839&x-expires=1773212356&x-signature=OvpjH6KB8ArCF44r9%2FHy91n%2BKCQ%3D"
        alt="王小明">
      <div class="name-contact">
        <div class="name">王小明</div>
        <div class="position">全栈工程师</div>
        <div class="contact">
          <a href="tel:13800138000"><i class="fa-solid fa-phone"></i> 电话: 13800138000</a>
          <a href="mailto:wangxiaoming@example.com"><i class="fa-solid fa-envelope"></i> 邮箱:
            wangxiaoming@example.com</a>
          <a href="#"><i class="fa-brands fa-weixin"></i> 微信: wangxiaomingwx</a>
          <a href="https://github.com/wangxiaoming"><i class="fa-brands fa-github"></i> GitHub: wangxiaoming</a>
          <a href="https://www.zhihu.com/people/wangxiaoming"><i class="fa-brands fa-zhihu"></i> 知乎: 王小明</a>
        </div>
      </div>
    </div>
    <div class="intro fade-in">
      <p>
        我是王小明，怀揣着对技术的无限热爱与执着，投身于全栈开发领域。在不断的学习与实践中，积累了丰富的项目经验，具备了扎实的技术功底和创新能力。始终坚信技术的力量能够改善生活，致力于通过自己的专业知识为用户打造高效、优质的产品体验。注重团队协作，善于沟通交流，能够与不同背景的人紧密合作，共同攻克项目中的难题。
      </p>
    </div>
    <div class="section fade-in">
      <h2>教育背景</h2>
      <div class="timeline-item">
        <h3>XX大学 - 计算机科学与技术 - 本科</h3>
        <p>2015 - 2019</p>
        <ul>
          <li>深入学习了数据结构、算法分析、编程语言（C、Java、Python）、操作系统、计算机网络等核心课程，成绩优异，多次获得奖学金。</li>
          <li>参与学校组织的科研项目，负责智能算法的研究与开发，通过优化算法模型，使系统的准确率提高了 25%。</li>
          <li>加入学校的编程社团，积极组织和参与各类编程竞赛，带领团队在省级竞赛中荣获二等奖。</li>
          <li>利用课余时间自主学习前端开发技术，完成了多个小型网站的开发，积累了实践经验。</li>
        </ul>
      </div>
    </div>
    <div class="section fade-in">
      <h2>工作经历</h2>
      <div class="timeline-item">
        <h3>XX科技有限公司 - 全栈工程师</h3>
        <p>2019 - 2022</p>
        <ol>
          <li>主导公司核心业务系统的重构工作，采用前后端分离架构，提升了系统的可维护性和扩展性。前端使用 Vue.js 框架构建用户界面，实现了组件化开发和高效的状态管理；后端采用 Python + Django
            搭建服务器，结合 RESTful API 进行数据交互。</li>
          <li>负责数据库的设计与优化，针对业务需求设计了合理的数据库表结构，通过创建索引、优化查询语句等方式，将数据库的响应时间缩短了 40%。</li>
          <li>参与产品的需求分析和设计阶段，与产品团队密切沟通，提出了多个创新性的功能建议，提高了产品的竞争力。</li>
          <li>带领团队完成多个项目的迭代开发，制定详细的项目计划和任务分配，确保项目按时交付。同时，对团队成员进行技术指导和培训，提升了团队整体技术水平。</li>
        </ol>
      </div>
      <div class="timeline-item">
        <h3>XX网络公司 - 高级全栈工程师</h3>
        <p>2022 - 至今</p>
        <ol>
          <li>负责公司电商平台的架构升级，引入微服务架构和容器化技术，提高了系统的容错性和可扩展性。使用 Docker 容器化部署服务，通过 Kubernetes 进行集群管理。</li>
          <li>优化前端页面性能，采用代码分割、懒加载、图片压缩等技术手段，将页面加载速度提升了 50%，显著改善了用户体验。</li>
          <li>建立持续集成和持续部署（CI/CD）流程，使用 Jenkins 实现自动化构建和部署，提高了开发效率和代码质量。</li>
          <li>参与公司的技术分享和交流活动，分享自己的技术经验和最佳实践，促进了团队的技术交流和创新。</li>
        </ol>
      </div>
    </div>
    <div class="section fade-in">
      <h2>专业技能</h2>
      <div class="skills-container">
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress" style="width: 90%;">前端技能（HTML5、CSS3、JavaScript、Vue.js、React） - 90%</div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 85%;">后端技术（Python、Flask、Django、Node.js） - 85%</div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 80%;">数据库（MySQL、PostgreSQL、MongoDB、Redis） - 80%</div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 70%;">人工智能（机器学习、深度学习基础，TensorFlow、PyTorch） - 70%</div>
          </div>
        </div>
        <!-- <div class="radar-container">
          <canvas class="radar-chart" id="radarChart"></canvas>
        </div> -->
      </div>
      <script>
        const ctx = document.getElementById('radarChart').getContext('2d');
        const myRadarChart = new Chart(ctx, {
          type: 'radar',
          data: {
            labels: ['前端技能', '后端技术', '数据库', '人工智能'],
            datasets: [{
              label: '技能水平',
              data: [90, 85, 80, 70],
              backgroundColor: 'rgba(0, 123, 255, 0.2)',
              borderColor: 'rgba(0, 123, 255, 1)',
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              r: {
                min: 0,
                max: 100
              }
            }
          }
        });
      </script>
    </div>
    <div class="section fade-in">
      <h2>项目经验</h2>
      <div class="timeline-item">
        <h3>在线教育平台项目</h3>
        <p>2020 - 2021</p>
        <ul>
          <li>担任项目负责人，负责项目的整体规划、技术选型和团队管理。</li>
          <li>前端使用 Vue.js 构建用户界面，实现了课程展示、视频播放、在线学习、作业提交等功能。采用组件化开发思想，提高了代码的可维护性和复用性。</li>
          <li>后端使用 Python + Flask 搭建服务器，实现了用户认证、课程管理、订单支付等功能。结合 RESTful API 与前端进行数据交互，确保数据的高效传输。</li>
          <li>引入 Redis 作为缓存，提高了系统的响应速度和并发处理能力。同时，使用 MySQL 数据库存储业务数据，保证数据的安全性和完整性。</li>
          <li>项目上线后，用户注册量迅速增长，达到了 50 万，得到了用户的广泛好评和认可。</li>
        </ul>
      </div>
      <div class="timeline-item">
        <h3>电商系统优化项目</h3>
        <p>2022 - 2023</p>
        <ul>
          <li>对电商系统进行全面的性能分析和优化，找出系统的性能瓶颈和问题所在。</li>
          <li>优化数据库查询语句，创建合适的索引，对数据库表进行分区，减少了数据库的 I/O 操作，将数据库的响应时间缩短了 50%。</li>
          <li>采用分布式缓存技术，如 Redis 和 Memcached，减轻了数据库的压力，提高了系统的并发处理能力。</li>
          <li>对前端页面进行性能优化，压缩代码、合并文件、优化图片，采用懒加载技术，将页面加载速度提升了 60%。</li>
          <li>经过优化，系统的吞吐量提升了 80%，用户满意度显著提高。</li>
        </ul>
      </div>
    </div>
    <div class="footer-contact">
      <a href="tel:19910325138"><i class="fa-solid fa-phone"></i></a>
      <a href="mailto:wslsdust@163.com"><i class="fa-solid fa-envelope"></i></a>
      <a href="#"><i class="fa-brands fa-weixin"></i></a>
      <a href="https://github.com/codevvvv9"><i class="fa-brands fa-github"></i></a>
    </div>
  </div>
  <script>
    // 添加下载PDF按钮事件处理
    document.getElementById('download-pdf').addEventListener('click', function () {
      const link = document.createElement('a');
      link.href = './吴少林-2025前端工程师-19910325138.pdf';
      link.download = '吴少林-2025前端工程师-19910325138.pdf';
      link.click();
    });

    // 添加预览PDF按钮事件处理
    document.getElementById('preview-pdf').addEventListener('click', function () {
      window.open('./吴少林-2025前端工程师-19910325138.pdf', '_blank');
    });
    // document.getElementById('export-pdf').addEventListener('click', function () {
    //   const card = document.getElementById('resume-card');

    //   html2canvas(card, {
    //     scale: 2,
    //     useCORS: true,
    //     allowTaint: true,
    //     backgroundColor: "#ffffff",
    //     onclone: function (clonedDoc) {
    //       const clonedCard = clonedDoc.getElementById('resume-card');
    //       // 确保进度条颜色
    //       clonedDoc.querySelectorAll('.progress').forEach(progress => {
    //         progress.style.backgroundColor = '#007BFF';
    //         progress.style.color = 'white';
    //       });
    //       // 确保雷达图显示
    //       const canvas = clonedDoc.querySelector('.radar-chart');
    //       if (canvas) {
    //         canvas.style.maxHeight = '300px';
    //       }
    //     }
    //   }).then(canvas => {
    //     const imgData = canvas.toDataURL('image/png');
    //     const pdf = new jspdf.jsPDF({
    //       orientation: 'portrait',
    //       unit: 'px',
    //       format: [canvas.width, canvas.height]
    //     });

    //     pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
    //     pdf.save('resume.pdf');
    //   });
    // });
    document.getElementById('export-pdf').addEventListener('click', function () {
    const card = document.getElementById('resume-card');
    
    // 临时调整样式以适应PDF
    const originalStyle = card.style.cssText;
    card.style.cssText = `
        width: 800px !important;
        margin: 0 auto !important;
        padding: 20px !important;
        box-sizing: border-box !important;
    `;
    
    html2canvas(card, {
        scale: 2,
        useCORS: true,
        allowTaint: true,
        backgroundColor: "#ffffff",
        windowWidth: 800,
        windowHeight: card.scrollHeight,
        onclone: function(clonedDoc) {
            const clonedCard = clonedDoc.getElementById('resume-card');
            // 确保克隆元素样式正确
            clonedCard.style.cssText = `
                width: 800px !important;
                margin: 0 !important;
                padding: 20px !important;
                box-sizing: border-box !important;
            `;
            
            // 确保所有内容都能正确显示
            clonedDoc.querySelectorAll('.section').forEach(section => {
                section.style.width = '100%';
                section.style.margin = '0 0 20px 0';
            });
        }
    }).then(canvas => {
        // 使用A4比例计算PDF尺寸
        const imgWidth = 595.28;  // A4宽度，单位pt
        const imgHeight = 841.89; // A4高度，单位pt
        const pageHeight = (imgWidth / canvas.width) * canvas.height;
        
        // 创建PDF
        const pdf = new jspdf.jsPDF({
            orientation: 'portrait',
            unit: 'pt',
            format: 'a4'
        });
        
        // 计算页数
        const pageCount = Math.ceil(pageHeight / imgHeight);
        
        // 分页添加内容
        for (let i = 0; i < pageCount; i++) {
            if (i > 0) {
                pdf.addPage();
            }
            
            const position = -imgHeight * i;
            pdf.addImage(
                canvas.toDataURL('image/png'),
                'PNG',
                0,
                position,
                imgWidth,
                pageHeight
            );
        }
        
        pdf.save('resume.pdf');
        
        // 恢复原始样式
        card.style.cssText = originalStyle;
    });
});
    document.getElementById('export-image').addEventListener('click', function () {
      const card = document.getElementById('resume-card');

      html2canvas(card, {
        scale: 2,
        useCORS: true,
        allowTaint: true,
        backgroundColor: "#ffffff",
        onclone: function (clonedDoc) {
          const clonedCard = clonedDoc.getElementById('resume-card');
          // 确保进度条颜色
          clonedDoc.querySelectorAll('.progress').forEach(progress => {
            progress.style.backgroundColor = '#007BFF';
            progress.style.color = 'white';
          });
          // 确保雷达图显示
          const canvas = clonedDoc.querySelector('.radar-chart');
          if (canvas) {
            canvas.style.maxHeight = '300px';
          }
        }
      }).then(canvas => {
        canvas.toBlob(blob => {
          const link = document.createElement('a');
          link.download = 'resume.png';
          link.href = URL.createObjectURL(blob);
          link.click();
        }, 'image/png');
      });
    });
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('preview-md').addEventListener('click', function () {
        const previewHtmlOld = `
        <div class="preview-container" style="display: block;">
            <div class="editor-panel" style="height: 85vh;">
                <textarea id="markdown-input" 
                          placeholder="粘贴Markdown内容..." 
                          style="width: 48%; height: 80%; margin: 20px 1%;"></textarea>
                <div id="markdown-preview" 
                     class="card" 
                     style="width: 48%; height: 80%; overflow: auto; margin: 20px 1%;">
                </div>
                <div style="text-align: center; padding: 20px; width: 100%;">
                    <button id="confirm-replace" 
                            style="padding: 10px 20px; margin: 0 10px;">
                        确认替换主内容
                    </button>
                    <button onclick="document.querySelector('.preview-container').remove()" 
                            style="padding: 10px 20px; margin: 0 10px;">
                        关闭
                    </button>
                </div>
            </div>
        </div>`;
        const previewHtml = `
          <div class="preview-container" style="display: block;">
              <div class="editor-panel">
                  <div class="editor-content" style="box-sizing: border-box;display: flex; width: 100%; height: calc(100% - 80px);">
                      <textarea id="markdown-input" 
                          placeholder="粘贴Markdown内容..." 
                          style="flex: 1; margin: 10px; padding: 10px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px; resize: none;"></textarea>
                      <div id="markdown-preview" 
                          class="card" 
                          style="flex: 1; margin: 10px; padding: 10px; border-radius: 8px; overflow-y: auto;">
                      </div>
                  </div>
                  <div class="button-row" style="width: 100%;">
                      <button id="confirm-replace" 
                          style="padding: 10px 20px; margin: 0 10px; min-width: 120px;">
                          确认替换
                      </button>
                      <button onclick="document.querySelector('.preview-container').remove()" 
                          style="padding: 10px 20px; margin: 0 10px; min-width: 120px;">
                          关闭
                      </button>
                  </div>
              </div>
          </div>`;
        document.body.insertAdjacentHTML('beforeend', previewHtml);

        // 实时预览逻辑
        const input = document.getElementById('markdown-input');
        const preview = document.getElementById('markdown-preview');
        input.addEventListener('input', function (e) {
          preview.innerHTML = marked.parse(e.target.value);
          // 应用原有样式规则
          applyResumeStyles(preview);
        });

        // 确认替换逻辑
        document.getElementById('confirm-replace').addEventListener('click', function () {
          const markdownContent = input.value;
          const resumeCard = document.getElementById('resume-card');

          // 创建带样式的容器
          const newContent = document.createElement('div');
          newContent.className = 'fade-in';
          newContent.style.animationDuration = '0.5s';
          newContent.innerHTML = marked.parse(markdownContent);

          // 应用样式规则
          applyResumeStyles(newContent);

          // 替换主内容
          resumeCard.innerHTML = newContent.innerHTML;

          // 重新初始化图表等动态元素
          initCharts();

          // 关闭预览
          document.querySelector('.preview-container').remove();
        });

        // 样式应用函数
        function applyResumeStyles(container) {
          // 为标题添加样式
          container.querySelectorAll('h2').forEach(h2 => {
            h2.className = 'section fade-in';
            h2.innerHTML = `<span style="font-size: 24px;">${h2.textContent}</span>`;
          });

          // 为列表项添加时间线样式
          container.querySelectorAll('ul, ol').forEach(ul => {
            ul.className = 'timeline-item';
            ul.querySelectorAll('li').forEach(li => {
              li.style.margin = '10px 0';
              li.style.lineHeight = '1.6';
            });
          });

          // 为技能条添加进度样式
          container.querySelectorAll('div:has(> .progress)').forEach(div => {
            div.className = 'progress-bar';
          });
        }

        // 图表初始化函数
        function initCharts() {
          // 在此添加雷达图等初始化逻辑
        }
      });
    });
  </script>
</body>

</html>